{
  "dashboard": {
    "id": null,
    "uid": "cqt-mission-control",
    "title": "CQT Mission‑Control",
    "panels": [
      {
        "type": "graph",
        "title": "Order Latency",
        "targets": [{ "expr": "cqt_order_latency_seconds", "legendFormat": "{{bucket_id}}" }]
      },
      {
        "type": "stat",
        "title": "Liquidity Imbalance Ratio (LIR)",
        "targets": [{ "expr": "cqt_liquidity_imbalance_ratio", "legendFormat": "{{symbol}}" }]
      }
    ],
    "schemaVersion": 38,
    "version": 1,
    "refresh": "5s"
  },
  "overwrite": true
}
{
  "datasource": "Prometheus",
  "fieldConfig": {
    "defaults": {
      "unit": "short",
      "decimals": 0,
      "thresholds": {
        "mode": "absolute",
        "steps": [
          { "color": "green", "value": null },
          { "color": "orange", "value": 10 },
          { "color": "red", "value": 50 }
        ]
      }
    },
    "overrides": []
  },
  "gridPos": { "h": 4, "w": 12, "x": 0, "y": 26 },
  "id": 8,
  "options": {
    "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
    "colorMode": "value",
    "graphMode": "none",
    "justifyMode": "auto",
    "textMode": "auto"
  },
  "targets": [
    {
      "expr": "arb_guard_hits_total",
      "legendFormat": "Guard Hits",
      "refId": "A"
    }
  ],
  "title": "Arb Guard Hits",
  "type": "stat"
},
{
  "datasource": "Prometheus",
  "fieldConfig": {
    "defaults": {
      "unit": "short",
      "decimals": 0,
      "thresholds": {
        "mode": "absolute",
        "steps": [
          { "color": "green", "value": null },
          { "color": "orange", "value": 5 },
          { "color": "red", "value": 20 }
        ]
      }
    },
    "overrides": []
  },
  "gridPos": { "h": 4, "w": 12, "x": 12, "y": 26 },
  "id": 9,
  "options": {
    "reduceOptions": { "calcs": ["lastNotNull"], "fields": "", "values": false },
    "colorMode": "value",
    "graphMode": "none",
    "justifyMode": "auto",
    "textMode": "auto"
  },
  "targets": [
    {
      "expr": "arb_success_total",
      "legendFormat": "Arb Successes",
      "refId": "A"
    }
  ],
  "title": "Arb Successes",
  "type": "stat"
}

{
  "type": "stat",
  "title": "Global Win‑Rate",
  "targets": [
    {
      "expr": "sum(order_success_total) / sum(order_total)",
      "legendFormat": "All assets"
    }
  ],
  "colorMode": "value",
  "thresholds": "0.99,0.995"
},
{
  "type": "stat",
  "title": "Max Draw‑Down (any asset)",
  "targets": [
    {
      "expr": "max(drawdown_pct)",
      "legendFormat": ""
    }
  ],
  "colorMode": "value",
  "thresholds": "-3,-2"
},
{
  "type": "stat",
  "title": "Latency (95th pct)",
  "targets": [
    {
      "expr": "histogram_quantile(0.95, sum(rate(cqt_latency_seconds_bucket[5m])) by (le))",
      "legendFormat": ""
    }
  ],
  "colorMode": "value",
  "thresholds": "0.1,0.2"
}

{
  "type": "stat",
  "title": "Winning Streak (per bucket)",
  "gridPos": { "x": 0, "y": 0, "w": 6, "h": 4 },
  "targets": [
    {
      "refId": "A",
      "expr": "max(bucket_streak_wins) by (bucket_id)",
      "legendFormat": "{{bucket_id}}"
    }
  ],
  "options": {
    "reduceOptions": { "calcs": ["lastNotNull"], "values": false },
    "colorMode": "value",
    "graphMode": "none",
    "textMode": "value"
  },
  "fieldConfig": {
    "defaults": {
      "thresholds": {
        "mode": "absolute",
        "steps": [
          { "value": null, "color": "green" },   // 0‑2 → green
          { "value": 3,    "color": "orange" }, // 3‑4 → orange
          { "value": 5,    "color": "red" }     // ≥5 → red
        ]
      },
      "unit": "short"
    }
  }
},
{
  "type": "stat",
  "title": "Losing Streak (per bucket)",
  "gridPos": { "x": 6, "y": 0, "w": 6, "h": 4 },
  "targets": [
    {
      "refId": "B",
      "expr": "max(bucket_streak_losses) by (bucket_id)",
      "legendFormat": "{{bucket_id}}"
    }
  ],
  "options": {
    "reduceOptions": { "calcs": ["lastNotNull"], "values": false },
    "colorMode": "value",
    "graphMode": "none",
    "textMode": "value"
  },
  "fieldConfig": {
    "defaults": {
      "thresholds": {
        "mode": "absolute",
        "steps": [
          { "value": null, "color": "green" },
          { "value": 3,    "color": "orange" },
          { "value": 5,    "color": "red" }
        ]
      },
      "unit": "short"
    }
  }
}
