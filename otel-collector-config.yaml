receivers:
  otlp:
    protocols:
      grpc:
      http:

exporters:
  jaeger:
    endpoint: "jaeger:14250"
    tls:
      insecure: true
  prometheus:
    endpoint: "0.0.0.0:9464"

service:
  pipelines:
    traces:
      receivers: [otlp]
      exporters: [jaeger, prometheus]


processors:
  filter:
    error_spans:
      error_mode: ignore
      trace_state:
        - key: "error"
          value: "true"


processors:
  batch:
    timeout: 5s
  memory_limiter:
    limit_mib: 500
    spike_limit_mib: 100
    check_interval: 5s
  tail_sampling:
    policies:
      - name: keep_some_trades
        type: probabilistic
        probabilistic:
          sampling_percentage: 5   # keep 5â€¯% of spans
